apiVersion: v1
kind: ConfigMap
metadata:
  creationTimestamp: null
  name: grafana-dashboard-provisioning
  labels:
    grafana_dashboard: "true"
  annotations:
    grafana-folder: /grafana-dashboard-definitions/Insights
data:
  Provisioning-1674548289785.json: |-
    {
       "annotations" : {
          "list" : [
             {
                "builtIn" : 1,
                "datasource" : {
                   "type" : "datasource",
                   "uid" : "grafana"
                },
                "enable" : true,
                "hide" : true,
                "iconColor" : "rgba(0, 211, 255, 1)",
                "name" : "Annotations & Alerts",
                "target" : {
                   "limit" : 100,
                   "matchAny" : false,
                   "tags" : [],
                   "type" : "dashboard"
                },
                "type" : "dashboard"
             }
          ]
       },
       "editable" : true,
       "fiscalYearStartMonth" : 0,
       "graphTooltip" : 0,
       "id" : 114514,
       "links" : [],
       "liveNow" : false,
       "panels" : [
          {
             "collapsed" : false,
             "gridPos" : {
                "h" : 1,
                "w" : 24,
                "x" : 0,
                "y" : 0
             },
             "id" : 46,
             "panels" : [],
             "title" : "Job scheduler",
             "type" : "row"
          },
          {
             "datasource" : {
                "type" : "prometheus",
                "uid" : "${datasource}"
             },
             "fieldConfig" : {
                "defaults" : {
                   "color" : {
                      "mode" : "thresholds"
                   },
                   "mappings" : [],
                   "thresholds" : {
                      "mode" : "absolute",
                      "steps" : [
                         {
                            "color" : "dark-red",
                            "value" : null
                         },
                         {
                            "color" : "red",
                            "value" : 0.8
                         },
                         {
                            "color" : "#EAB839",
                            "value" : 0.9
                         },
                         {
                            "color" : "green",
                            "value" : 0.95
                         }
                      ]
                   },
                   "unit" : "percentunit"
                },
                "overrides" : []
             },
             "gridPos" : {
                "h" : 8,
                "w" : 12,
                "x" : 0,
                "y" : 1
             },
             "id" : 59,
             "options" : {
                "colorMode" : "value",
                "graphMode" : "area",
                "justifyMode" : "auto",
                "orientation" : "auto",
                "reduceOptions" : {
                   "calcs" : [
                      "lastNotNull"
                   ],
                   "fields" : "",
                   "values" : false
                },
                "textMode" : "auto"
             },
             "pluginVersion" : "9.3.8",
             "targets" : [
                {
                   "datasource" : {
                      "type" : "prometheus",
                      "uid" : "${datasource}"
                   },
                   "editorMode" : "code",
                   "expr" : "(sum(increase(provisioning_reservation_count{result=\"success\",type=~\"$type\"}[$__range]))\n/\nsum(increase(provisioning_reservation_count{type=~\"$type\"}[$__range]))) or on() vector(0)",
                   "legendFormat" : "__auto",
                   "range" : true,
                   "refId" : "A"
                }
             ],
             "title" : "Reservation success rate per hyperscaler",
             "type" : "stat"
          },
          {
             "datasource" : {
                "type" : "prometheus",
                "uid" : "${datasource}"
             },
             "fieldConfig" : {
                "defaults" : {
                   "color" : {
                      "mode" : "thresholds"
                   },
                   "decimals" : 0,
                   "mappings" : [],
                   "min" : 0,
                   "thresholds" : {
                      "mode" : "absolute",
                      "steps" : [
                         {
                            "color" : "blue",
                            "value" : null
                         }
                      ]
                   },
                   "unit" : "none"
                },
                "overrides" : []
             },
             "gridPos" : {
                "h" : 8,
                "w" : 6,
                "x" : 12,
                "y" : 1
             },
             "id" : 60,
             "options" : {
                "colorMode" : "value",
                "graphMode" : "none",
                "justifyMode" : "auto",
                "orientation" : "auto",
                "reduceOptions" : {
                   "calcs" : [
                      "lastNotNull"
                   ],
                   "fields" : "",
                   "values" : false
                },
                "textMode" : "auto"
             },
             "pluginVersion" : "9.3.8",
             "targets" : [
                {
                   "datasource" : {
                      "type" : "prometheus",
                      "uid" : "${datasource}"
                   },
                   "editorMode" : "code",
                   "expr" : "sum(increase(provisioning_reservation_count{type=~\"$type\"}[$__range]))",
                   "legendFormat" : "__auto",
                   "range" : true,
                   "refId" : "A"
                }
             ],
             "title" : "Total reservations per hyperscaler",
             "type" : "stat"
          },
          {
             "datasource" : {
                "type" : "prometheus",
                "uid" : "${datasource}"
             },
             "fieldConfig" : {
                "defaults" : {
                   "color" : {
                      "fixedColor" : "blue",
                      "mode" : "fixed"
                   },
                   "decimals" : 0,
                   "mappings" : [],
                   "min" : 0,
                   "thresholds" : {
                      "mode" : "absolute",
                      "steps" : [
                         {
                            "color" : "blue",
                            "value" : null
                         }
                      ]
                   },
                   "unit" : "s"
                },
                "overrides" : []
             },
             "gridPos" : {
                "h" : 8,
                "w" : 6,
                "x" : 18,
                "y" : 1
             },
             "id" : 61,
             "options" : {
                "colorMode" : "value",
                "graphMode" : "none",
                "justifyMode" : "auto",
                "orientation" : "auto",
                "reduceOptions" : {
                   "calcs" : [
                      "lastNotNull"
                   ],
                   "fields" : "",
                   "values" : false
                },
                "textMode" : "auto"
             },
             "pluginVersion" : "9.3.8",
             "targets" : [
                {
                   "datasource" : {
                      "type" : "prometheus",
                      "uid" : "${datasource}"
                   },
                   "editorMode" : "code",
                   "expr" : "histogram_quantile(0.95, sum(rate(provisioning_background_job_duration_bucket{type=~\"launch_instances_$type\"}[$__range])) by (le))",
                   "legendFormat" : "__auto",
                   "range" : true,
                   "refId" : "A"
                }
             ],
             "title" : "Reservation duration per hyperscaler (p95)",
             "type" : "stat"
          },
          {
             "datasource" : {
                "type" : "prometheus",
                "uid" : "${datasource}"
             },
             "fieldConfig" : {
                "defaults" : {
                   "color" : {
                      "mode" : "continuous-GrYlRd"
                   },
                   "custom" : {
                      "axisCenteredZero" : false,
                      "axisColorMode" : "text",
                      "axisLabel" : "",
                      "axisPlacement" : "auto",
                      "barAlignment" : 0,
                      "drawStyle" : "bars",
                      "fillOpacity" : 0,
                      "gradientMode" : "none",
                      "hideFrom" : {
                         "legend" : false,
                         "tooltip" : false,
                         "viz" : false
                      },
                      "lineInterpolation" : "linear",
                      "lineWidth" : 1,
                      "pointSize" : 5,
                      "scaleDistribution" : {
                         "type" : "linear"
                      },
                      "showPoints" : "never",
                      "spanNulls" : true,
                      "stacking" : {
                         "group" : "A",
                         "mode" : "none"
                      },
                      "thresholdsStyle" : {
                         "mode" : "off"
                      }
                   },
                   "mappings" : [],
                   "max" : 1,
                   "min" : 0,
                   "thresholds" : {
                      "mode" : "absolute",
                      "steps" : [
                         {
                            "color" : "green",
                            "value" : null
                         }
                      ]
                   },
                   "unit" : "percentunit"
                },
                "overrides" : []
             },
             "gridPos" : {
                "h" : 8,
                "w" : 12,
                "x" : 0,
                "y" : 9
             },
             "id" : 54,
             "options" : {
                "legend" : {
                   "calcs" : [],
                   "displayMode" : "list",
                   "placement" : "bottom",
                   "showLegend" : false
                },
                "tooltip" : {
                   "mode" : "single",
                   "sort" : "none"
                }
             },
             "targets" : [
                {
                   "datasource" : {
                      "type" : "prometheus",
                      "uid" : "${datasource}"
                   },
                   "editorMode" : "code",
                   "exemplar" : false,
                   "expr" : "(sum(rate(provisioning_reservation_count{result=\"failure\",type=~\"$type\"}[$__interval]))\n/\nsum(rate(provisioning_reservation_count{type=~\"$type\"}[$__interval]))) or on() vector(0)",
                   "hide" : false,
                   "legendFormat" : "{{type}} failure",
                   "range" : true,
                   "refId" : "B"
                }
             ],
             "title" : "Reservation error rate per hyperscaler",
             "type" : "timeseries"
          },
          {
             "datasource" : {
                "type" : "prometheus",
                "uid" : "${datasource}"
             },
             "description" : "Duration of background job types",
             "fieldConfig" : {
                "defaults" : {
                   "color" : {
                      "mode" : "palette-classic"
                   },
                   "custom" : {
                      "axisCenteredZero" : false,
                      "axisColorMode" : "text",
                      "axisLabel" : "",
                      "axisPlacement" : "auto",
                      "barAlignment" : 0,
                      "drawStyle" : "line",
                      "fillOpacity" : 30,
                      "gradientMode" : "opacity",
                      "hideFrom" : {
                         "legend" : false,
                         "tooltip" : false,
                         "viz" : false
                      },
                      "lineInterpolation" : "linear",
                      "lineStyle" : {
                         "fill" : "solid"
                      },
                      "lineWidth" : 2,
                      "pointSize" : 5,
                      "scaleDistribution" : {
                         "type" : "linear"
                      },
                      "showPoints" : "never",
                      "spanNulls" : true,
                      "stacking" : {
                         "group" : "A",
                         "mode" : "none"
                      },
                      "thresholdsStyle" : {
                         "mode" : "off"
                      }
                   },
                   "mappings" : [],
                   "thresholds" : {
                      "mode" : "absolute",
                      "steps" : [
                         {
                            "color" : "green",
                            "value" : null
                         }
                      ]
                   },
                   "unit" : "s"
                },
                "overrides" : []
             },
             "gridPos" : {
                "h" : 8,
                "w" : 12,
                "x" : 12,
                "y" : 9
             },
             "id" : 52,
             "options" : {
                "legend" : {
                   "calcs" : [],
                   "displayMode" : "list",
                   "placement" : "bottom",
                   "showLegend" : true
                },
                "tooltip" : {
                   "mode" : "single",
                   "sort" : "none"
                }
             },
             "targets" : [
                {
                   "datasource" : {
                      "type" : "prometheus",
                      "uid" : "${datasource}"
                   },
                   "editorMode" : "code",
                   "exemplar" : true,
                   "expr" : "histogram_quantile(0.95, sum(rate(provisioning_background_job_duration_bucket{type=~\"launch_instances_$type\"}[$__interval])) by (le)) OR on() vector(0)",
                   "format" : "time_series",
                   "instant" : false,
                   "legendFormat" : "p95",
                   "range" : true,
                   "refId" : "A"
                },
                {
                   "datasource" : {
                      "type" : "prometheus",
                      "uid" : "${datasource}"
                   },
                   "editorMode" : "code",
                   "exemplar" : true,
                   "expr" : "histogram_quantile(0.99, sum(rate(provisioning_background_job_duration_bucket{type=~\"launch_instances_$type\"}[$__interval])) by (le)) OR on() vector(0)",
                   "hide" : false,
                   "legendFormat" : "p99",
                   "range" : true,
                   "refId" : "B"
                }
             ],
             "title" : "Job duration per hyperscaler",
             "type" : "timeseries"
          },
          {
             "datasource" : {
                "type" : "prometheus",
                "uid" : "${datasource}"
             },
             "description" : "Number of jobs in the Redis job queue waiting to be picked up",
             "fieldConfig" : {
                "defaults" : {
                   "color" : {
                      "mode" : "palette-classic"
                   },
                   "custom" : {
                      "axisCenteredZero" : false,
                      "axisColorMode" : "text",
                      "axisLabel" : "",
                      "axisPlacement" : "auto",
                      "barAlignment" : 0,
                      "drawStyle" : "line",
                      "fillOpacity" : 0,
                      "gradientMode" : "none",
                      "hideFrom" : {
                         "legend" : false,
                         "tooltip" : false,
                         "viz" : false
                      },
                      "lineInterpolation" : "linear",
                      "lineWidth" : 1,
                      "pointSize" : 5,
                      "scaleDistribution" : {
                         "type" : "linear"
                      },
                      "showPoints" : "auto",
                      "spanNulls" : false,
                      "stacking" : {
                         "group" : "A",
                         "mode" : "none"
                      },
                      "thresholdsStyle" : {
                         "mode" : "off"
                      }
                   },
                   "mappings" : [],
                   "thresholds" : {
                      "mode" : "absolute",
                      "steps" : [
                         {
                            "color" : "green",
                            "value" : null
                         },
                         {
                            "color" : "red",
                            "value" : 80
                         }
                      ]
                   }
                },
                "overrides" : []
             },
             "gridPos" : {
                "h" : 8,
                "w" : 12,
                "x" : 0,
                "y" : 17
             },
             "id" : 50,
             "options" : {
                "legend" : {
                   "calcs" : [],
                   "displayMode" : "list",
                   "placement" : "bottom",
                   "showLegend" : false
                },
                "tooltip" : {
                   "mode" : "single",
                   "sort" : "none"
                }
             },
             "targets" : [
                {
                   "datasource" : {
                      "type" : "prometheus",
                      "uid" : "${datasource}"
                   },
                   "editorMode" : "code",
                   "expr" : "sum(sum_over_time(provisioning_job_queue_size[$__interval]))",
                   "legendFormat" : "size",
                   "range" : true,
                   "refId" : "A"
                }
             ],
             "title" : "Job queue size",
             "type" : "timeseries"
          },
          {
             "datasource" : {
                "type" : "prometheus",
                "uid" : "${datasource}"
             },
             "description" : "Number of jobs being processed by our workers.",
             "fieldConfig" : {
                "defaults" : {
                   "color" : {
                      "mode" : "palette-classic"
                   },
                   "custom" : {
                      "axisCenteredZero" : false,
                      "axisColorMode" : "text",
                      "axisGridShow" : false,
                      "axisLabel" : "",
                      "axisPlacement" : "auto",
                      "barAlignment" : 0,
                      "drawStyle" : "points",
                      "fillOpacity" : 100,
                      "gradientMode" : "none",
                      "hideFrom" : {
                         "legend" : false,
                         "tooltip" : false,
                         "viz" : false
                      },
                      "lineInterpolation" : "linear",
                      "lineWidth" : 0,
                      "pointSize" : 3,
                      "scaleDistribution" : {
                         "type" : "linear"
                      },
                      "showPoints" : "never",
                      "spanNulls" : false,
                      "stacking" : {
                         "group" : "A",
                         "mode" : "none"
                      },
                      "thresholdsStyle" : {
                         "mode" : "off"
                      }
                   },
                   "decimals" : 0,
                   "mappings" : [],
                   "min" : 0,
                   "thresholds" : {
                      "mode" : "absolute",
                      "steps" : [
                         {
                            "color" : "green",
                            "value" : null
                         }
                      ]
                   },
                   "unit" : "none"
                },
                "overrides" : []
             },
             "gridPos" : {
                "h" : 8,
                "w" : 12,
                "x" : 12,
                "y" : 17
             },
             "id" : 48,
             "options" : {
                "legend" : {
                   "calcs" : [],
                   "displayMode" : "list",
                   "placement" : "bottom",
                   "showLegend" : false
                },
                "tooltip" : {
                   "mode" : "single",
                   "sort" : "none"
                }
             },
             "targets" : [
                {
                   "datasource" : {
                      "type" : "prometheus",
                      "uid" : "${datasource}"
                   },
                   "editorMode" : "code",
                   "expr" : "sum(sum_over_time(provisioning_job_queue_inflight[$__interval]))",
                   "legendFormat" : "jobs",
                   "range" : true,
                   "refId" : "A"
                }
             ],
             "title" : "In-flight jobs",
             "type" : "timeseries"
          },
          {
             "collapsed" : false,
             "gridPos" : {
                "h" : 1,
                "w" : 24,
                "x" : 0,
                "y" : 25
             },
             "id" : 40,
             "panels" : [],
             "title" : "Request Latency",
             "type" : "row"
          },
          {
             "datasource" : {
                "type" : "prometheus",
                "uid" : "${datasource}"
             },
             "description" : "The request latency for http requests over the selected date range",
             "fieldConfig" : {
                "defaults" : {
                   "color" : {
                      "mode" : "thresholds"
                   },
                   "custom" : {
                      "axisCenteredZero" : false,
                      "axisColorMode" : "text",
                      "axisLabel" : "milliseconds",
                      "axisPlacement" : "auto",
                      "barAlignment" : 0,
                      "drawStyle" : "points",
                      "fillOpacity" : 36,
                      "gradientMode" : "scheme",
                      "hideFrom" : {
                         "legend" : false,
                         "tooltip" : false,
                         "viz" : false
                      },
                      "lineInterpolation" : "linear",
                      "lineStyle" : {
                         "fill" : "solid"
                      },
                      "lineWidth" : 0,
                      "pointSize" : 7,
                      "scaleDistribution" : {
                         "type" : "linear"
                      },
                      "showPoints" : "always",
                      "spanNulls" : false,
                      "stacking" : {
                         "group" : "A",
                         "mode" : "none"
                      },
                      "thresholdsStyle" : {
                         "mode" : "line"
                      }
                   },
                   "links" : [],
                   "mappings" : [],
                   "min" : 0,
                   "thresholds" : {
                      "mode" : "absolute",
                      "steps" : [
                         {
                            "color" : "green",
                            "value" : null
                         },
                         {
                            "color" : "purple",
                            "value" : 200
                         }
                      ]
                   },
                   "unit" : "ms"
                },
                "overrides" : [
                   {
                      "matcher" : {
                         "id" : "byName",
                         "options" : "p99"
                      },
                      "properties" : [
                         {
                            "id" : "color",
                            "value" : {
                               "fixedColor" : "blue",
                               "mode" : "fixed"
                            }
                         }
                      ]
                   },
                   {
                      "matcher" : {
                         "id" : "byName",
                         "options" : "p95"
                      },
                      "properties" : [
                         {
                            "id" : "color",
                            "value" : {
                               "fixedColor" : "yellow",
                               "mode" : "fixed"
                            }
                         }
                      ]
                   },
                   {
                      "matcher" : {
                         "id" : "byName",
                         "options" : "p50"
                      },
                      "properties" : [
                         {
                            "id" : "color",
                            "value" : {
                               "fixedColor" : "orange",
                               "mode" : "fixed"
                            }
                         }
                      ]
                   }
                ]
             },
             "gridPos" : {
                "h" : 13,
                "w" : 24,
                "x" : 0,
                "y" : 26
             },
             "id" : 36,
             "links" : [],
             "options" : {
                "legend" : {
                   "calcs" : [],
                   "displayMode" : "list",
                   "placement" : "bottom",
                   "showLegend" : true
                },
                "tooltip" : {
                   "mode" : "single",
                   "sort" : "none"
                }
             },
             "pluginVersion" : "9.0.3",
             "targets" : [
                {
                   "datasource" : {
                      "type" : "prometheus",
                      "uid" : "${datasource}"
                   },
                   "editorMode" : "code",
                   "exemplar" : true,
                   "expr" : "histogram_quantile(0.99, sum(rate(provisioning_http_request_duration_ms_bucket[$__interval])) by (le))",
                   "legendFormat" : "p99",
                   "range" : true,
                   "refId" : "A"
                },
                {
                   "datasource" : {
                      "type" : "prometheus",
                      "uid" : "${datasource}"
                   },
                   "editorMode" : "code",
                   "expr" : "histogram_quantile(0.95, sum(rate(provisioning_http_request_duration_ms_bucket[$__interval]))by (le))",
                   "hide" : false,
                   "legendFormat" : "p95",
                   "range" : true,
                   "refId" : "B"
                },
                {
                   "datasource" : {
                      "type" : "prometheus",
                      "uid" : "${datasource}"
                   },
                   "editorMode" : "code",
                   "expr" : "histogram_quantile(0.5, sum(rate(provisioning_http_request_duration_ms_bucket[$__interval]))by (le))",
                   "hide" : false,
                   "legendFormat" : "p50",
                   "range" : true,
                   "refId" : "C"
                }
             ],
             "title" : "Request Latency",
             "type" : "timeseries"
          },
          {
             "collapsed" : false,
             "datasource" : {
                "type" : "prometheus",
                "uid" : "${datasource}"
             },
             "gridPos" : {
                "h" : 1,
                "w" : 24,
                "x" : 0,
                "y" : 39
             },
             "id" : 24,
             "panels" : [],
             "targets" : [
                {
                   "datasource" : {
                      "type" : "prometheus",
                      "uid" : "${datasource}"
                   },
                   "refId" : "A"
                }
             ],
             "title" : "HTTP Request Stability",
             "type" : "row"
          },
          {
             "datasource" : {
                "type" : "prometheus",
                "uid" : "${datasource}"
             },
             "description" : "Our SLO target",
             "fieldConfig" : {
                "defaults" : {
                   "color" : {
                      "mode" : "thresholds"
                   },
                   "decimals" : 0,
                   "mappings" : [
                      {
                         "options" : {
                            "match" : "null",
                            "result" : {
                               "text" : "N/A"
                            }
                         },
                         "type" : "special"
                      }
                   ],
                   "max" : 1,
                   "min" : 0,
                   "thresholds" : {
                      "mode" : "absolute",
                      "steps" : [
                         {
                            "color" : "green",
                            "value" : null
                         },
                         {
                            "color" : "red",
                            "value" : 95
                         }
                      ]
                   },
                   "unit" : "percentunit"
                },
                "overrides" : []
             },
             "gridPos" : {
                "h" : 7,
                "w" : 7,
                "x" : 0,
                "y" : 40
             },
             "id" : 32,
             "links" : [],
             "maxDataPoints" : 100,
             "options" : {
                "colorMode" : "value",
                "graphMode" : "area",
                "justifyMode" : "auto",
                "orientation" : "horizontal",
                "reduceOptions" : {
                   "calcs" : [
                      "lastNotNull"
                   ],
                   "fields" : "",
                   "values" : false
                },
                "textMode" : "auto"
             },
             "pluginVersion" : "9.3.8",
             "targets" : [
                {
                   "datasource" : {
                      "type" : "prometheus",
                      "uid" : "${datasource}"
                   },
                   "editorMode" : "code",
                   "expr" : "sum(rate(api_3scale_gateway_api_status{exported_service=\"provisioning\",status!=\"5xx\"}[$__range]))/sum(rate(api_3scale_gateway_api_status{exported_service=\"provisioning\"}[$__range]))",
                   "hide" : false,
                   "range" : true,
                   "refId" : "A"
                }
             ],
             "title" : "Total HTTP Success Rate ",
             "type" : "stat"
          },
          {
             "datasource" : {
                "type" : "prometheus",
                "uid" : "${datasource}"
             },
             "description" : "Our SLO target",
             "fieldConfig" : {
                "defaults" : {
                   "color" : {
                      "mode" : "thresholds"
                   },
                   "decimals" : 0,
                   "mappings" : [
                      {
                         "options" : {
                            "match" : "null",
                            "result" : {
                               "text" : "N/A"
                            }
                         },
                         "type" : "special"
                      }
                   ],
                   "max" : 1,
                   "min" : 0,
                   "thresholds" : {
                      "mode" : "percentage",
                      "steps" : [
                         {
                            "color" : "red",
                            "value" : null
                         },
                         {
                            "color" : "#EAB839",
                            "value" : 90
                         },
                         {
                            "color" : "green",
                            "value" : 95
                         }
                      ]
                   },
                   "unit" : "percentunit"
                },
                "overrides" : []
             },
             "gridPos" : {
                "h" : 7,
                "w" : 7,
                "x" : 7,
                "y" : 40
             },
             "id" : 62,
             "links" : [],
             "maxDataPoints" : 100,
             "options" : {
                "colorMode" : "value",
                "graphMode" : "area",
                "justifyMode" : "auto",
                "orientation" : "horizontal",
                "reduceOptions" : {
                   "calcs" : [
                      "lastNotNull"
                   ],
                   "fields" : "",
                   "values" : false
                },
                "textMode" : "auto"
             },
             "pluginVersion" : "9.3.8",
             "targets" : [
                {
                   "datasource" : {
                      "type" : "prometheus",
                      "uid" : "${datasource}"
                   },
                   "editorMode" : "code",
                   "expr" : "sum(rate(provisioning_http_request_duration_ms_bucket{code=~\"2.*\", le=\"750\"}[$__range])) / sum(rate(provisioning_http_request_duration_ms_bucket{code=~\"2.*\", le=\"+Inf\"}[$__range]))",
                   "hide" : false,
                   "range" : true,
                   "refId" : "A"
                }
             ],
             "title" : "HTTP Success Latency 750ms Target",
             "type" : "stat"
          },
          {
             "datasource" : {
                "type" : "prometheus",
                "uid" : "${datasource}"
             },
             "fieldConfig" : {
                "defaults" : {
                   "color" : {
                      "mode" : "thresholds"
                   },
                   "mappings" : [
                      {
                         "options" : {
                            "match" : "null",
                            "result" : {
                               "text" : "N/A"
                            }
                         },
                         "type" : "special"
                      }
                   ],
                   "thresholds" : {
                      "mode" : "absolute",
                      "steps" : [
                         {
                            "color" : "blue",
                            "value" : null
                         }
                      ]
                   },
                   "unit" : "none"
                },
                "overrides" : []
             },
             "gridPos" : {
                "h" : 7,
                "w" : 10,
                "x" : 14,
                "y" : 40
             },
             "id" : 41,
             "links" : [],
             "maxDataPoints" : 100,
             "options" : {
                "colorMode" : "value",
                "graphMode" : "none",
                "justifyMode" : "auto",
                "orientation" : "auto",
                "reduceOptions" : {
                   "calcs" : [
                      "lastNotNull"
                   ],
                   "fields" : "",
                   "values" : false
                },
                "textMode" : "auto"
             },
             "pluginVersion" : "9.3.8",
             "targets" : [
                {
                   "datasource" : {
                      "type" : "prometheus",
                      "uid" : "${datasource}"
                   },
                   "editorMode" : "code",
                   "expr" : "sum(increase(provisioning_http_request_total[$__range]))",
                   "hide" : false,
                   "range" : true,
                   "refId" : "A"
                }
             ],
             "title" : "HTTP requests ",
             "type" : "stat"
          },
          {
             "datasource" : {
                "type" : "prometheus",
                "uid" : "${datasource}"
             },
             "fieldConfig" : {
                "defaults" : {
                   "color" : {
                      "mode" : "thresholds"
                   },
                   "custom" : {
                      "axisCenteredZero" : false,
                      "axisColorMode" : "text",
                      "axisLabel" : "",
                      "axisPlacement" : "auto",
                      "barAlignment" : 0,
                      "drawStyle" : "line",
                      "fillOpacity" : 11,
                      "gradientMode" : "none",
                      "hideFrom" : {
                         "legend" : false,
                         "tooltip" : false,
                         "viz" : false
                      },
                      "lineInterpolation" : "linear",
                      "lineWidth" : 2,
                      "pointSize" : 5,
                      "scaleDistribution" : {
                         "type" : "linear"
                      },
                      "showPoints" : "auto",
                      "spanNulls" : false,
                      "stacking" : {
                         "group" : "A",
                         "mode" : "none"
                      },
                      "thresholdsStyle" : {
                         "mode" : "off"
                      }
                   },
                   "links" : [],
                   "mappings" : [],
                   "thresholds" : {
                      "mode" : "absolute",
                      "steps" : [
                         {
                            "color" : "red",
                            "value" : null
                         }
                      ]
                   },
                   "unit" : "ops"
                },
                "overrides" : [
                   {
                      "matcher" : {
                         "id" : "byName",
                         "options" : "success"
                      },
                      "properties" : [
                         {
                            "id" : "color",
                            "value" : {
                               "fixedColor" : "green",
                               "mode" : "fixed"
                            }
                         }
                      ]
                   }
                ]
             },
             "gridPos" : {
                "h" : 8,
                "w" : 24,
                "x" : 0,
                "y" : 47
             },
             "id" : 34,
             "links" : [],
             "options" : {
                "legend" : {
                   "calcs" : [],
                   "displayMode" : "list",
                   "placement" : "bottom",
                   "showLegend" : true
                },
                "tooltip" : {
                   "mode" : "single",
                   "sort" : "none"
                }
             },
             "pluginVersion" : "9.0.3",
             "targets" : [
                {
                   "datasource" : {
                      "type" : "prometheus",
                      "uid" : "${datasource}"
                   },
                   "editorMode" : "code",
                   "exemplar" : true,
                   "expr" : "(sum(rate(provisioning_http_request_total{code!~\"4.*\"}[$interval])) OR on() vector(0)) - (sum(rate(provisioning_http_request_total{code=~\"5.*\"}[$interval])) OR on() vector(0)) ",
                   "legendFormat" : "success",
                   "range" : true,
                   "refId" : "A"
                },
                {
                   "datasource" : {
                      "type" : "prometheus",
                      "uid" : "${datasource}"
                   },
                   "editorMode" : "code",
                   "exemplar" : true,
                   "expr" : "(sum(rate(provisioning_http_request_total{code=~\"5.*\"}[$interval])) OR on() vector(0))",
                   "hide" : false,
                   "legendFormat" : "error",
                   "range" : true,
                   "refId" : "B"
                }
             ],
             "title" : "HTTP  Throughput Rate",
             "type" : "timeseries"
          },
          {
             "collapsed" : false,
             "datasource" : {
                "type" : "prometheus",
                "uid" : "${datasource}"
             },
             "gridPos" : {
                "h" : 1,
                "w" : 24,
                "x" : 0,
                "y" : 55
             },
             "id" : 26,
             "panels" : [],
             "targets" : [
                {
                   "datasource" : {
                      "type" : "prometheus",
                      "uid" : "${datasource}"
                   },
                   "refId" : "A"
                }
             ],
             "title" : "Source Availability Request Stability and Latency",
             "type" : "row"
          },
          {
             "datasource" : {
                "type" : "prometheus",
                "uid" : "${datasource}"
             },
             "description" : "Percentage of source availability checks processed and delivered back to sources.",
             "fieldConfig" : {
                "defaults" : {
                   "color" : {
                      "mode" : "thresholds"
                   },
                   "decimals" : 0,
                   "mappings" : [
                      {
                         "options" : {
                            "match" : "null",
                            "result" : {
                               "text" : "N/A"
                            }
                         },
                         "type" : "special"
                      }
                   ],
                   "max" : 1,
                   "thresholds" : {
                      "mode" : "absolute",
                      "steps" : [
                         {
                            "color" : "green",
                            "value" : null
                         },
                         {
                            "color" : "red",
                            "value" : 75
                         }
                      ]
                   },
                   "unit" : "percentunit"
                },
                "overrides" : []
             },
             "gridPos" : {
                "h" : 7,
                "w" : 5,
                "x" : 0,
                "y" : 56
             },
             "id" : 33,
             "links" : [],
             "maxDataPoints" : 100,
             "options" : {
                "colorMode" : "value",
                "graphMode" : "area",
                "justifyMode" : "auto",
                "orientation" : "horizontal",
                "reduceOptions" : {
                   "calcs" : [
                      "lastNotNull"
                   ],
                   "fields" : "",
                   "values" : false
                },
                "textMode" : "auto"
             },
             "pluginVersion" : "9.3.8",
             "targets" : [
                {
                   "datasource" : {
                      "type" : "prometheus",
                      "uid" : "${datasource}"
                   },
                   "expr" : "(sum(rate(provisioning_source_availability_check_request_total[$__range]))+ sum(rate(provisioning_invalid_source_availability_check_request_total[$__range])))/sum(rate(provisioning_http_request_total{path=\"/api/provisioning/v1/availability_status/sources/\"}[$__range]))",
                   "refId" : "A"
                }
             ],
             "title" : "Source Availability Delivery Rate",
             "type" : "stat"
          },
          {
             "datasource" : {
                "type" : "prometheus",
                "uid" : "${datasource}"
             },
             "fieldConfig" : {
                "defaults" : {
                   "color" : {
                      "mode" : "thresholds"
                   },
                   "custom" : {
                      "axisCenteredZero" : false,
                      "axisColorMode" : "text",
                      "axisLabel" : "",
                      "axisPlacement" : "auto",
                      "barAlignment" : 0,
                      "drawStyle" : "line",
                      "fillOpacity" : 11,
                      "gradientMode" : "none",
                      "hideFrom" : {
                         "legend" : false,
                         "tooltip" : false,
                         "viz" : false
                      },
                      "lineInterpolation" : "linear",
                      "lineWidth" : 2,
                      "pointSize" : 5,
                      "scaleDistribution" : {
                         "type" : "linear"
                      },
                      "showPoints" : "auto",
                      "spanNulls" : false,
                      "stacking" : {
                         "group" : "A",
                         "mode" : "none"
                      },
                      "thresholdsStyle" : {
                         "mode" : "off"
                      }
                   },
                   "links" : [],
                   "mappings" : [],
                   "thresholds" : {
                      "mode" : "absolute",
                      "steps" : [
                         {
                            "color" : "red",
                            "value" : null
                         }
                      ]
                   },
                   "unit" : "opm"
                },
                "overrides" : [
                   {
                      "matcher" : {
                         "id" : "byName",
                         "options" : "error"
                      },
                      "properties" : [
                         {
                            "id" : "color",
                            "value" : {
                               "fixedColor" : "red",
                               "mode" : "fixed"
                            }
                         }
                      ]
                   },
                   {
                      "matcher" : {
                         "id" : "byName",
                         "options" : "success"
                      },
                      "properties" : [
                         {
                            "id" : "color",
                            "value" : {
                               "fixedColor" : "green",
                               "mode" : "fixed"
                            }
                         }
                      ]
                   },
                   {
                      "matcher" : {
                         "id" : "byName",
                         "options" : "total"
                      },
                      "properties" : [
                         {
                            "id" : "color",
                            "value" : {
                               "fixedColor" : "blue",
                               "mode" : "fixed"
                            }
                         }
                      ]
                   }
                ]
             },
             "gridPos" : {
                "h" : 7,
                "w" : 19,
                "x" : 5,
                "y" : 56
             },
             "id" : 42,
             "interval" : "1h",
             "links" : [],
             "options" : {
                "legend" : {
                   "calcs" : [],
                   "displayMode" : "list",
                   "placement" : "bottom",
                   "showLegend" : true
                },
                "tooltip" : {
                   "mode" : "single",
                   "sort" : "none"
                }
             },
             "pluginVersion" : "9.0.3",
             "targets" : [
                {
                   "datasource" : {
                      "type" : "prometheus",
                      "uid" : "${datasource}"
                   },
                   "editorMode" : "code",
                   "exemplar" : true,
                   "expr" : "(sum(rate(provisioning_source_availability_check_request_total{error=\"false\"}[$__interval])) OR on() vector(0))",
                   "legendFormat" : "success",
                   "range" : true,
                   "refId" : "A"
                },
                {
                   "datasource" : {
                      "type" : "prometheus",
                      "uid" : "${datasource}"
                   },
                   "editorMode" : "code",
                   "exemplar" : true,
                   "expr" : "(sum(rate(provisioning_source_availability_check_request_total{error=\"true\"}[$__interval])) OR on() vector(0))",
                   "hide" : false,
                   "legendFormat" : "error",
                   "range" : true,
                   "refId" : "B"
                },
                {
                   "datasource" : {
                      "type" : "prometheus",
                      "uid" : "${datasource}"
                   },
                   "editorMode" : "code",
                   "exemplar" : true,
                   "expr" : "(sum(rate(provisioning_source_availability_check_request_total[$__interval])) OR on() vector(0))",
                   "hide" : false,
                   "legendFormat" : "total",
                   "range" : true,
                   "refId" : "C"
                }
             ],
             "title" : "Source Availability Throughput Rate",
             "type" : "timeseries"
          },
          {
             "datasource" : {
                "type" : "prometheus",
                "uid" : "${datasource}"
             },
             "description" : "The latency (p99, p90, p50) for source checks.",
             "fieldConfig" : {
                "defaults" : {
                   "color" : {
                      "mode" : "thresholds"
                   },
                   "custom" : {
                      "axisCenteredZero" : false,
                      "axisColorMode" : "text",
                      "axisLabel" : "milliseconds",
                      "axisPlacement" : "auto",
                      "barAlignment" : 0,
                      "drawStyle" : "points",
                      "fillOpacity" : 36,
                      "gradientMode" : "scheme",
                      "hideFrom" : {
                         "legend" : false,
                         "tooltip" : false,
                         "viz" : false
                      },
                      "lineInterpolation" : "linear",
                      "lineStyle" : {
                         "fill" : "solid"
                      },
                      "lineWidth" : 0,
                      "pointSize" : 7,
                      "scaleDistribution" : {
                         "type" : "linear"
                      },
                      "showPoints" : "always",
                      "spanNulls" : false,
                      "stacking" : {
                         "group" : "A",
                         "mode" : "none"
                      },
                      "thresholdsStyle" : {
                         "mode" : "line"
                      }
                   },
                   "links" : [],
                   "mappings" : [],
                   "min" : 0,
                   "thresholds" : {
                      "mode" : "absolute",
                      "steps" : [
                         {
                            "color" : "green",
                            "value" : null
                         }
                      ]
                   },
                   "unit" : "ms"
                },
                "overrides" : [
                   {
                      "matcher" : {
                         "id" : "byName",
                         "options" : "p99"
                      },
                      "properties" : [
                         {
                            "id" : "color",
                            "value" : {
                               "fixedColor" : "blue",
                               "mode" : "fixed"
                            }
                         }
                      ]
                   },
                   {
                      "matcher" : {
                         "id" : "byName",
                         "options" : "p95"
                      },
                      "properties" : [
                         {
                            "id" : "color",
                            "value" : {
                               "fixedColor" : "yellow",
                               "mode" : "fixed"
                            }
                         }
                      ]
                   },
                   {
                      "matcher" : {
                         "id" : "byName",
                         "options" : "p50"
                      },
                      "properties" : [
                         {
                            "id" : "color",
                            "value" : {
                               "fixedColor" : "orange",
                               "mode" : "fixed"
                            }
                         }
                      ]
                   }
                ]
             },
             "gridPos" : {
                "h" : 9,
                "w" : 24,
                "x" : 0,
                "y" : 63
             },
             "id" : 63,
             "links" : [],
             "options" : {
                "legend" : {
                   "calcs" : [],
                   "displayMode" : "list",
                   "placement" : "bottom",
                   "showLegend" : true
                },
                "tooltip" : {
                   "mode" : "single",
                   "sort" : "none"
                }
             },
             "pluginVersion" : "9.0.3",
             "targets" : [
                {
                   "datasource" : {
                      "type" : "prometheus",
                      "uid" : "${datasource}"
                   },
                   "editorMode" : "code",
                   "exemplar" : true,
                   "expr" : "histogram_quantile(0.99, sum(rate(provisioning_source_availability_check_request_duration_ms_bucket[$__interval])) by (le))",
                   "legendFormat" : "p99",
                   "range" : true,
                   "refId" : "A"
                },
                {
                   "datasource" : {
                      "type" : "prometheus",
                      "uid" : "${datasource}"
                   },
                   "editorMode" : "code",
                   "expr" : "histogram_quantile(0.95, sum(rate(provisioning_source_availability_check_request_duration_ms_bucket[$__interval]))by (le))",
                   "hide" : false,
                   "legendFormat" : "p95",
                   "range" : true,
                   "refId" : "B"
                },
                {
                   "datasource" : {
                      "type" : "prometheus",
                      "uid" : "${datasource}"
                   },
                   "editorMode" : "code",
                   "expr" : "histogram_quantile(0.5, sum(rate(provisioning_source_availability_check_request_duration_ms_bucket[$__interval]))by (le))",
                   "hide" : false,
                   "legendFormat" : "p50",
                   "range" : true,
                   "refId" : "C"
                }
             ],
             "title" : "Source Availability Check Latency",
             "type" : "timeseries"
          }
       ],
       "refresh" : false,
       "schemaVersion" : 37,
       "style" : "dark",
       "tags" : [],
       "templating" : {
          "list" : [
             {
                "current" : {
                   "selected" : false,
                   "text" : "crcs02ue1-prometheus",
                   "value" : "crcs02ue1-prometheus"
                },
                "hide" : 0,
                "includeAll" : false,
                "multi" : false,
                "name" : "datasource",
                "options" : [],
                "query" : "prometheus",
                "queryValue" : "",
                "refresh" : 1,
                "regex" : "/crc(p01|s02)ue1-prometheus/",
                "skipUrlSync" : false,
                "type" : "datasource"
             },
             {
                "auto" : false,
                "auto_count" : 30,
                "auto_min" : "10s",
                "current" : {
                   "selected" : false,
                   "text" : "1h",
                   "value" : "1h"
                },
                "hide" : 0,
                "name" : "interval",
                "options" : [
                   {
                      "selected" : false,
                      "text" : "5m",
                      "value" : "5m"
                   },
                   {
                      "selected" : false,
                      "text" : "30m",
                      "value" : "30m"
                   },
                   {
                      "selected" : true,
                      "text" : "1h",
                      "value" : "1h"
                   },
                   {
                      "selected" : false,
                      "text" : "6h",
                      "value" : "6h"
                   },
                   {
                      "selected" : false,
                      "text" : "12h",
                      "value" : "12h"
                   },
                   {
                      "selected" : false,
                      "text" : "1d",
                      "value" : "1d"
                   },
                   {
                      "selected" : false,
                      "text" : "3d",
                      "value" : "3d"
                   },
                   {
                      "selected" : false,
                      "text" : "7d",
                      "value" : "7d"
                   }
                ],
                "query" : "5m,30m,1h,6h,12h,1d,3d,7d",
                "queryValue" : "",
                "refresh" : 2,
                "skipUrlSync" : false,
                "type" : "interval"
             },
             {
                "allValue" : ".*",
                "current" : {
                   "selected" : true,
                   "text" : [
                      "All"
                   ],
                   "value" : [
                      "$__all"
                   ]
                },
                "description" : "Hyperscaler to display results for",
                "hide" : 0,
                "includeAll" : true,
                "label" : "Hyperscaler type",
                "multi" : true,
                "name" : "type",
                "options" : [
                   {
                      "selected" : true,
                      "text" : "All",
                      "value" : "$__all"
                   },
                   {
                      "selected" : false,
                      "text" : "aws",
                      "value" : "aws"
                   },
                   {
                      "selected" : false,
                      "text" : "azure",
                      "value" : "azure"
                   },
                   {
                      "selected" : false,
                      "text" : "gcp",
                      "value" : "gcp"
                   }
                ],
                "query" : "aws,azure,gcp",
                "queryValue" : "",
                "skipUrlSync" : false,
                "type" : "custom"
             }
          ]
       },
       "time" : {
          "from" : "now-24h",
          "to" : "now"
       },
       "timepicker" : {
          "refresh_intervals" : [
             "5s",
             "10s",
             "30s",
             "1m",
             "5m",
             "15m",
             "30m",
             "1h",
             "2h",
             "1d"
          ],
          "time_options" : [
             "5m",
             "15m",
             "1h",
             "6h",
             "12h",
             "24h",
             "2d",
             "7d",
             "30d"
          ]
       },
       "timezone" : "",
       "title" : "Provisioning",
       "uid" : "211",
       "version" : 1,
       "weekStart" : ""
    }
